# Xiaozhi Server 學習日誌

> 本文件記錄了Xiaozhi Server (Python/FastAPI)開發過程中遇到的問題和解決方案

## WebSocket連接認證

**問題描述**: 設備無法建立或維持WebSocket連接，服務器日誌顯示認證失敗

**症狀**: 
- 連接嘗試被拒絕
- 日誌中顯示401錯誤
- 設備反復嘗試重連

**解決方案**:
- 實現基於JWT的認證機制
- 確保令牌包含設備ID和權限信息
- 添加詳細的認證日誌

**預防措施**:
- 添加詳細的認證日誌和監控
- 建立令牌生命週期管理機制
- 定期輪換令牌

## 激活碼安全性

**問題描述**: 潛在的激活碼猜測攻擊風險

**症狀**:
- 短時間內大量激活嘗試
- 來自單一IP的多次嘗試

**解決方案**:
- 增加激活碼長度和複雜度
- 添加使用次數限制和IP限制
- 實現激活碼速率限制

**預防措施**:
- 實現暴力破解檢測機制
- 監控異常激活嘗試
- 設置激活碼有效期限制

_使用說明: 遇到新問題時，按照上述格式添加條目_ 