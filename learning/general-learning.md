# 通用學習記錄

> 本文件記錄了跨項目的通用問題和解決方案

## PowerShell命令限制

**問題描述**: Windows PowerShell中的命令語法與Linux/MacOS終端不同

**症狀**:
- PowerShell中不能使用`&&`連接多個命令
- 環境變量引用語法不同
- 路徑分隔符可能引起問題

**解決方案**:
- 在PowerShell中使用分號`;`代替`&&`連接命令
- 使用`$env:VARIABLE_NAME`語法引用環境變量
- 對包含空格的路徑使用引號包裹

**預防措施**:
- 為Windows環境創建專用批處理文件(.bat)代替Shell腳本
- 記錄Windows與其他平台的命令差異
- 考慮使用PowerShell專有的管道和cmdlet語法

## Windows與Unix路徑差異

**問題描述**: Windows系統與Unix/Linux/MacOS系統的路徑表示方式不同

**症狀**:
- Windows使用反斜杠`\`，而Unix系統使用正斜杠`/`
- 絕對路徑格式不同（Windows: `C:\path`，Unix: `/path`）
- 使用錯誤格式的路徑導致找不到文件

**解決方案**:
- 在Java代碼中使用`File.separator`獲取系統相容的分隔符
- 使用相對路徑減少跨平台問題
- 在處理路徑字符串時使用`path.replace('\\', '/')`進行標準化

**預防措施**:
- 避免硬編碼絕對路徑
- 使用Java提供的Path API（如`java.nio.file.Paths`）處理路徑
- 在跨平台項目中測試不同系統的路徑處理

## 測試最佳實踐

**問題描述**: 在不同環境中運行測試時遇到各種配置和依賴問題

**症狀**:
- 測試在開發環境運行正常，但在CI/CD環境失敗
- 依賴衝突導致測試無法編譯或運行
- 測試結果不一致或不可重現
- 環境差異導致測試行為不同

**解決方案**:
1. 使用依賴管理工具：
   - 使用Maven或Gradle管理依賴版本
   - 使用BOM（Bill of Materials）確保依賴版本一致
   - 明確指定測試依賴的scope為test

2. 創建獨立的測試環境：
   - 使用Docker容器運行測試，確保環境一致
   - 使用內存數據庫（如H2）代替生產數據庫
   - 使用模擬（Mock）外部服務和依賴

3. 分層測試策略：
   - 單元測試：測試單個類或方法，不依賴外部資源
   - 集成測試：測試組件間交互，可能依賴部分外部資源
   - 端到端測試：測試整個系統流程，依賴完整環境

4. 測試代碼質量保證：
   - 測試代碼應該和產品代碼一樣重視質量
   - 避免測試間的依賴，每個測試應該獨立運行
   - 使用測試覆蓋率工具監控測試覆蓋情況

**預防措施**:
1. 在項目初始階段建立測試規範和流程
2. 將測試納入CI/CD流程，確保每次提交都運行測試
3. 定期審查和重構測試代碼
4. 為測試失敗建立明確的調查和修復流程
5. 在多種環境中測試（開發、測試、生產類似環境）

**結果分析**:
通過實施上述最佳實踐，我們能夠：
- 減少環境相關的測試失敗
- 提高測試的可靠性和一致性
- 加快問題定位和修復速度
- 提高代碼質量和穩定性

_使用說明: 遇到新問題時，按照上述格式添加條目_ 